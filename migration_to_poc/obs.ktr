<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>obs</name>
    <description />
    <extended_description />
    <trans_version />
    <trans_type>Normal</trans_type>
    <directory>/</directory>
    <parameters>
    </parameters>
    <log>
      <trans-log-table>
        <connection />
        <schema />
        <table />
        <size_limit_lines />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject />
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject />
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject />
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject />
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection />
        <schema />
        <table />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection />
      <table />
      <field />
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file />
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2019/08/07 10:11:03.182</created_date>
    <modified_user>-</modified_user>
    <modified_date>2019/08/07 10:11:03.182</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>epts</name>
    <server />
    <type>GENERIC</type>
    <access>Native</access>
    <database />
    <port>1521</port>
    <username>root</username>
    <password>Encrypted 2be98afc86aa7f2e4cb79ce10cc9da0ce</password>
    <servername />
    <data_tablespace />
    <index_tablespace />
    <attributes>
      <attribute>
        <code>CUSTOM_DRIVER_CLASS</code>
        <attribute>com.mysql.cj.jdbc.Driver</attribute>
      </attribute>
      <attribute>
        <code>CUSTOM_URL</code>
        <attribute>jdbc:mysql://localhost:3306/CCSDBMASKED</attribute>
      </attribute>
      <attribute>
        <code>DATABASE_DIALECT_ID</code>
        <attribute>Generic database</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>1521</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <connection>
    <name>poc</name>
    <server />
    <type>GENERIC</type>
    <access>Native</access>
    <database />
    <port>1521</port>
    <username>root</username>
    <password>Encrypted 2be98afc86aa7f2e4cb79ce10cc9da0ce</password>
    <servername />
    <data_tablespace />
    <index_tablespace />
    <attributes>
      <attribute>
        <code>CUSTOM_DRIVER_CLASS</code>
        <attribute>com.mysql.cj.jdbc.Driver</attribute>
      </attribute>
      <attribute>
        <code>CUSTOM_URL</code>
        <attribute>jdbc:mysql://localhost:3306/openmrs</attribute>
      </attribute>
      <attribute>
        <code>DATABASE_DIALECT_ID</code>
        <attribute>Generic database</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>1521</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>get new encounter id</from>
      <to>Blocking step 2 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Blocking step 2 3</from>
      <to>poc_obs</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Merge join</from>
      <to>Blocking step 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Blocking step 2</from>
      <to>get new encounter id</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>new_patient_id</from>
      <to>Blocking step 2 4</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>epts_obs</from>
      <to>Blocking step 2 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Blocking step 2 4</from>
      <to>Merge join</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Blocking step 2 2</from>
      <to>Merge join</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Blocking step 2 3</from>
      <to>insert obs into temp</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>create temp</from>
      <to>epts_obs</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>Blocking step 2</name>
    <type>BlockingStep</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <pass_all_rows>Y</pass_all_rows>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>block</prefix>
    <cache_size>5000</cache_size>
    <compress>Y</compress>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>736</xloc>
      <yloc>560</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Blocking step 2 2</name>
    <type>BlockingStep</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <pass_all_rows>Y</pass_all_rows>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>block</prefix>
    <cache_size>5000</cache_size>
    <compress>Y</compress>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>560</xloc>
      <yloc>352</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Blocking step 2 3</name>
    <type>BlockingStep</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <pass_all_rows>Y</pass_all_rows>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>block</prefix>
    <cache_size>5000</cache_size>
    <compress>Y</compress>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>880</xloc>
      <yloc>320</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Blocking step 2 4</name>
    <type>BlockingStep</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <pass_all_rows>Y</pass_all_rows>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>block</prefix>
    <cache_size>5000</cache_size>
    <compress>Y</compress>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>560</xloc>
      <yloc>512</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Merge join</name>
    <type>MergeJoin</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <join_type>INNER</join_type>
    <step1>Blocking step 2 2</step1>
    <step2>Blocking step 2 4</step2>
    <keys_1>
      <key>person_id</key>
    </keys_1>
    <keys_2>
      <key>value</key>
    </keys_2>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>656</xloc>
      <yloc>416</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>epts_obs</name>
    <type>TableInput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>epts</connection>
    <sql>SELECT
obs_id,
person_id
, case
when concept_id='100' then '1598'
when concept_id='1001' then '1483'
when concept_id='1004' then '1495'
when concept_id='1007' then '1245'
when concept_id='101' then '302'
when concept_id='1013' then '3549'
when concept_id='1014' then '3231'
when concept_id='1017' then '1218'
when concept_id='1018' then '1217'
when concept_id='1019' then '1461'
when concept_id='1031' then '3543'
when concept_id='1053' then '1719'
when concept_id='1054' then '7888'
when concept_id='1058' then '2183'
when concept_id='1059' then '2184'
when concept_id='1065' then '1'
when concept_id='1066' then '2'
when concept_id='1067' then '8341'
when concept_id='1074' then '8432'
when concept_id='110' then '2670'
when concept_id='1101' then '2596'
when concept_id='1107' then '1154'
when concept_id='1113' then '8005'
when concept_id='1114' then '7907'
when concept_id='1115' then '8122'
when concept_id='1132' then '1279'
when concept_id='1133' then '1284'
when concept_id='1134' then '1282'
when concept_id='1135' then '3222'
when concept_id='1139' then '7822'
when concept_id='117' then '6235'
when concept_id='1170' then '1925'
when concept_id='1175' then '1975'
when concept_id='1179' then '1902'
when concept_id='1195' then '2589'
when concept_id='124' then '5671'
when concept_id='1240' then '362'
when concept_id='1242' then '1580'
when concept_id='1244' then '1648'
when concept_id='126' then '7732'
when concept_id='1267' then '2242'
when concept_id='1297' then '3300'
when concept_id='1298' then '1391'
when concept_id='1299' then '8136'
when concept_id='13' then '2451'
when concept_id='1332' then '1215'
when concept_id='1342' then '3149'
when concept_id='1343' then '2086'
when concept_id='1349' then '163'
when concept_id='1359' then '8185'
when concept_id='1362' then '2295'
when concept_id='1363' then '2297'
when concept_id='1383' then '8267'
when concept_id='1384' then '2115'
when concept_id='1385' then '8269'
when concept_id='140' then '396'
when concept_id='1414' then '7919'
when concept_id='142' then '3161'
when concept_id='1445' then '1154'
when concept_id='1448' then '7910'
when concept_id='1459' then '109'
when concept_id='147' then '790'
when concept_id='148' then '914'
when concept_id='149' then '641'
when concept_id='151' then '882'
when concept_id='1544' then '3589'
when concept_id='1546' then '1061'
when concept_id='1547' then '1063'
when concept_id='155' then '6188'
when concept_id='158' then '7940'
when concept_id='1598' then '8167'
when concept_id='160' then '5683'
when concept_id='1650' then '7983'
when concept_id='1710' then '1103'
when concept_id='173' then '897'
when concept_id='174' then '8024'
when concept_id='1780' then '1020'
when concept_id='1784' then '1126'
when concept_id='185' then '6499'
when concept_id='1872' then '7929'
when concept_id='1887' then '7917'
when concept_id='190' then '2450'
when concept_id='1900' then '7797'
when concept_id='1901' then '2150'
when concept_id='1903' then '7815'
when concept_id='1905' then '7835'
when concept_id='1906' then '7826'
when concept_id='1908' then '7954'
when concept_id='191' then '2452'
when concept_id='1912' then '7763'
when concept_id='198' then '835'
when concept_id='1981' then '2328'
when concept_id='1982' then '1871'
when concept_id='199' then '1024'
when concept_id='2001' then '7841'
when concept_id='201' then '856'
when concept_id='202' then '812'
when concept_id='2034' then '8337'
when concept_id='204' then '2283'
when concept_id='205' then '1984'
when concept_id='207' then '2808'
when concept_id='2077' then '3447'
when concept_id='208' then '6458'
when concept_id='2107' then '3126'
when concept_id='2113' then '2318'
when concept_id='212' then '6457'
when concept_id='2124' then '1272'
when concept_id='215' then '1065'
when concept_id='2152' then '8065'
when concept_id='218' then '6275'
when concept_id='220' then '1104'
when concept_id='223' then '1744'
when concept_id='235' then '1693'
when concept_id='237' then '8395'
when concept_id='238' then '1662'
when concept_id='247' then '1570'
when concept_id='250' then '1643'
when concept_id='254' then '1673'
when concept_id='256' then '1586'
when concept_id='257' then '1590'
when concept_id='263' then '1611'
when concept_id='265' then '1516'
when concept_id='269' then '1521'
when concept_id='273' then '1663'
when concept_id='29' then '1075'
when concept_id='290' then '1606'
when concept_id='300' then '1179'
when concept_id='301' then '8154'
when concept_id='311' then '8174'
when concept_id='313' then '1607'
when concept_id='323' then '1599'
when concept_id='329' then '1703'
when concept_id='351' then '1651'
when concept_id='368' then '2083'
when concept_id='410' then '825'
when concept_id='412' then '8449'
when concept_id='42' then '7741'
when concept_id='43' then '7740'
when concept_id='431' then '1608'
when concept_id='436' then '1571'
when concept_id='438' then '8406'
when concept_id='44' then '2141'
when concept_id='44' then '7962'
when concept_id='45' then '1236'
when concept_id='460' then '2656'
when concept_id='467' then '6101'
when concept_id='496' then '1546'
when concept_id='5' then '6409'
when concept_id='5006' then '3182'
when concept_id='5016' then '802'
when concept_id='5062' then '3349'
when concept_id='507' then '5877'
when concept_id='5087' then '7900'
when concept_id='5092' then '139'
when concept_id='5092' then '140'
when concept_id='5112' then '3071'
when concept_id='5170' then '2066'
when concept_id='5172' then '7726'
when concept_id='5200' then '451'
when concept_id='5209' then '2652'
when concept_id='5226' then '2625'
when concept_id='5241' then '1072'
when concept_id='5241' then '1140'
when concept_id='5245' then '2082'
when concept_id='5256' then '220'
when concept_id='5271' then '7846'
when concept_id='5276' then '2453'
when concept_id='5293' then '169'
when concept_id='530' then '497'
when concept_id='5312' then '2675'
when concept_id='5325' then '8345'
when concept_id='5340' then '7743'
when concept_id='54' then '1691'
when concept_id='5490' then '2927'
when concept_id='5497' then '8143'
when concept_id='5541' then '1080'
when concept_id='5555' then '2182'
when concept_id='5577' then '1955'
when concept_id='5599' then '7964'
when concept_id='56' then '3574'
when concept_id='5618' then '8338'
when concept_id='5624' then '1718'
when concept_id='5685' then '1107'
when concept_id='5685' then '3133'
when concept_id='57' then '5747'
when concept_id='58' then '8012'
when concept_id='581' then '6979'
when concept_id='5829' then '1502'
when concept_id='59' then '2923'
when concept_id='5910' then '8357'
when concept_id='5928' then '1884'
when concept_id='593' then '2694'
when concept_id='5932' then '8298'
when concept_id='5945' then '7976'
when concept_id='5949' then '2641'
when concept_id='5960' then '2653'
when concept_id='5964' then '8166'
when concept_id='5980' then '943'
when concept_id='6001' then '919'
when concept_id='6007' then '2631'
when concept_id='6020' then '2683'
when concept_id='6024' then '7735'
when concept_id='6029' then '1012'
when concept_id='6033' then '1050'
when concept_id='6142' then '8247'
when concept_id='6143' then '8020'
when concept_id='6158' then '1916'
when concept_id='620' then '905'
when concept_id='6226' then '3052'
when concept_id='6228' then '2060'
when concept_id='6229' then '2061'
when concept_id='6230' then '2062'
when concept_id='6245' then '7928'
when concept_id='6248' then '2364'
when concept_id='6257' then '2331'
when concept_id='6276' then '7934'
when concept_id='63' then '5756'
when concept_id='6304' then '7927'
when concept_id='6305' then '97'
when concept_id='645' then '3033'
when concept_id='653' then '8137'
when concept_id='654' then '8135'
when concept_id='655' then '3305'
when concept_id='664' then '8340'
when concept_id='666' then '1223'
when concept_id='689' then '2305'
when concept_id='697' then '2306'
when concept_id='702' then '8055'
when concept_id='728' then '1322'
when concept_id='729' then '1209'
when concept_id='732' then '8390'
when concept_id='733' then '1511'
when concept_id='735' then '1529'
when concept_id='735' then '8391'
when concept_id='740' then '365'
when concept_id='745' then '8407'
when concept_id='747' then '1588'
when concept_id='751' then '1632'
when concept_id='753' then '1575'
when concept_id='754' then '1526'
when concept_id='755' then '8414'
when concept_id='756' then '1670'
when concept_id='763' then '1655'
when concept_id='765' then '1667'
when concept_id='766' then '1674'
when concept_id='767' then '1100'
when concept_id='77' then '467'
when concept_id='779' then '1547'
when concept_id='786' then '1534'
when concept_id='790' then '8147'
when concept_id='798' then '1682'
when concept_id='80' then '1073'
when concept_id='81' then '1973'
when concept_id='814' then '985'
when concept_id='826' then '7734'
when concept_id='832' then '1008'
when concept_id='834' then '7967'
when concept_id='836' then '7718'
when concept_id='838' then '6555'
when concept_id='848' then '8134'
when concept_id='851' then '1213'
when concept_id='855' then '3238'
when concept_id='856' then '8142'
when concept_id='857' then '8165'
when concept_id='859' then '2645'
when concept_id='868' then '1151'
when concept_id='868' then '884'
when concept_id='871' then '2642'
when concept_id='877' then '1081'
when concept_id='879' then '6530'
when concept_id='88' then '1525'
when concept_id='880' then '834'
when concept_id='881' then '6974'
when concept_id='884' then '2560'
when concept_id='89' then '370'
when concept_id='892' then '5752'
when concept_id='896' then '507'
when concept_id='899' then '2'
when concept_id='901' then '7007'
when concept_id='905' then '1948'
when concept_id='907' then '1629'
when concept_id='912' then '1609'
when concept_id='913' then '1551'
when concept_id='914' then '1552'
when concept_id='915' then '1698'
when concept_id='922' then '1561'
when concept_id='923' then '1678'
when concept_id='926' then '1618'
when concept_id='93' then '1563'
when concept_id='937' then '5777'
when concept_id='941' then '1509'
when concept_id='944' then '1523'
when concept_id='95' then '1579'
when concept_id='955' then '8118'
when concept_id='955' then '8417'
when concept_id='959' then '1577'
when concept_id='960' then '1557'
when concept_id='963' then '1543'
when concept_id='967' then '910'
when concept_id='970' then '8317'
when concept_id='971' then '8316'
when concept_id='98' then '1550'
when concept_id='99' then '1593'
when concept_id='991' then '428'
when concept_id='996' then '890'
else concept_id
end as concept_id
, encounter_id
, order_id
, obs_datetime
, '17' as location_id
, obs_group_id
, accession_number
, value_group_id
, value_boolean
, case
when value_coded='100' then '1598'
when value_coded='1001' then '1483'
when value_coded='1004' then '1495'
when value_coded='1007' then '1245'
when value_coded='101' then '302'
when value_coded='1013' then '3549'
when value_coded='1014' then '3231'
when value_coded='1017' then '1218'
when value_coded='1018' then '1217'
when value_coded='1019' then '1461'
when value_coded='1031' then '3543'
when value_coded='1053' then '1719'
when value_coded='1054' then '7888'
when value_coded='1058' then '2183'
when value_coded='1059' then '2184'
when value_coded='1065' then '1'
when value_coded='1066' then '2'
when value_coded='1067' then '8341'
when value_coded='1074' then '8432'
when value_coded='110' then '2670'
when value_coded='1101' then '2596'
when value_coded='1107' then '1154'
when value_coded='1113' then '8005'
when value_coded='1114' then '7907'
when value_coded='1115' then '8122'
when value_coded='1132' then '1279'
when value_coded='1133' then '1284'
when value_coded='1134' then '1282'
when value_coded='1135' then '3222'
when value_coded='1139' then '7822'
when value_coded='117' then '6235'
when value_coded='1170' then '1925'
when value_coded='1175' then '1975'
when value_coded='1179' then '1902'
when value_coded='1195' then '2589'
when value_coded='124' then '5671'
when value_coded='1240' then '362'
when value_coded='1242' then '1580'
when value_coded='1244' then '1648'
when value_coded='126' then '7732'
when value_coded='1267' then '2242'
when value_coded='1297' then '3300'
when value_coded='1298' then '1391'
when value_coded='1299' then '8136'
when value_coded='13' then '2451'
when value_coded='1332' then '1215'
when value_coded='1342' then '3149'
when value_coded='1343' then '2086'
when value_coded='1349' then '163'
when value_coded='1359' then '8185'
when value_coded='1362' then '2295'
when value_coded='1363' then '2297'
when value_coded='1383' then '8267'
when value_coded='1384' then '2115'
when value_coded='1385' then '8269'
when value_coded='140' then '396'
when value_coded='1414' then '7919'
when value_coded='142' then '3161'
when value_coded='1445' then '1154'
when value_coded='1448' then '7910'
when value_coded='1459' then '109'
when value_coded='147' then '790'
when value_coded='148' then '914'
when value_coded='149' then '641'
when value_coded='151' then '882'
when value_coded='1544' then '3589'
when value_coded='1546' then '1061'
when value_coded='1547' then '1063'
when value_coded='155' then '6188'
when value_coded='158' then '7940'
when value_coded='1598' then '8167'
when value_coded='160' then '5683'
when value_coded='1650' then '7983'
when value_coded='1710' then '1103'
when value_coded='173' then '897'
when value_coded='174' then '8024'
when value_coded='1780' then '1020'
when value_coded='1784' then '1126'
when value_coded='185' then '6499'
when value_coded='1872' then '7929'
when value_coded='1887' then '7917'
when value_coded='190' then '2450'
when value_coded='1900' then '7797'
when value_coded='1901' then '2150'
when value_coded='1903' then '7815'
when value_coded='1905' then '7835'
when value_coded='1906' then '7826'
when value_coded='1908' then '7954'
when value_coded='191' then '2452'
when value_coded='1912' then '7763'
when value_coded='198' then '835'
when value_coded='1981' then '2328'
when value_coded='1982' then '1871'
when value_coded='199' then '1024'
when value_coded='2001' then '7841'
when value_coded='201' then '856'
when value_coded='202' then '812'
when value_coded='2034' then '8337'
when value_coded='204' then '2283'
when value_coded='205' then '1984'
when value_coded='207' then '2808'
when value_coded='2077' then '3447'
when value_coded='208' then '6458'
when value_coded='2107' then '3126'
when value_coded='2113' then '2318'
when value_coded='212' then '6457'
when value_coded='2124' then '1272'
when value_coded='215' then '1065'
when value_coded='2152' then '8065'
when value_coded='218' then '6275'
when value_coded='220' then '1104'
when value_coded='223' then '1744'
when value_coded='235' then '1693'
when value_coded='237' then '8395'
when value_coded='238' then '1662'
when value_coded='247' then '1570'
when value_coded='250' then '1643'
when value_coded='254' then '1673'
when value_coded='256' then '1586'
when value_coded='257' then '1590'
when value_coded='263' then '1611'
when value_coded='265' then '1516'
when value_coded='269' then '1521'
when value_coded='273' then '1663'
when value_coded='29' then '1075'
when value_coded='290' then '1606'
when value_coded='300' then '1179'
when value_coded='301' then '8154'
when value_coded='311' then '8174'
when value_coded='313' then '1607'
when value_coded='323' then '1599'
when value_coded='329' then '1703'
when value_coded='351' then '1651'
when value_coded='368' then '2083'
when value_coded='410' then '825'
when value_coded='412' then '8449'
when value_coded='42' then '7741'
when value_coded='43' then '7740'
when value_coded='431' then '1608'
when value_coded='436' then '1571'
when value_coded='438' then '8406'
when value_coded='44' then '2141'
when value_coded='44' then '7962'
when value_coded='45' then '1236'
when value_coded='460' then '2656'
when value_coded='467' then '6101'
when value_coded='496' then '1546'
when value_coded='5' then '6409'
when value_coded='5006' then '3182'
when value_coded='5016' then '802'
when value_coded='5062' then '3349'
when value_coded='507' then '5877'
when value_coded='5087' then '7900'
when value_coded='5092' then '139'
when value_coded='5092' then '140'
when value_coded='5112' then '3071'
when value_coded='5170' then '2066'
when value_coded='5172' then '7726'
when value_coded='5200' then '451'
when value_coded='5209' then '2652'
when value_coded='5226' then '2625'
when value_coded='5241' then '1072'
when value_coded='5241' then '1140'
when value_coded='5245' then '2082'
when value_coded='5256' then '220'
when value_coded='5271' then '7846'
when value_coded='5276' then '2453'
when value_coded='5293' then '169'
when value_coded='530' then '497'
when value_coded='5312' then '2675'
when value_coded='5325' then '8345'
when value_coded='5340' then '7743'
when value_coded='54' then '1691'
when value_coded='5490' then '2927'
when value_coded='5497' then '8143'
when value_coded='5541' then '1080'
when value_coded='5555' then '2182'
when value_coded='5577' then '1955'
when value_coded='5599' then '7964'
when value_coded='56' then '3574'
when value_coded='5618' then '8338'
when value_coded='5624' then '1718'
when value_coded='5685' then '1107'
when value_coded='5685' then '3133'
when value_coded='57' then '5747'
when value_coded='58' then '8012'
when value_coded='581' then '6979'
when value_coded='5829' then '1502'
when value_coded='59' then '2923'
when value_coded='5910' then '8357'
when value_coded='5928' then '1884'
when value_coded='593' then '2694'
when value_coded='5932' then '8298'
when value_coded='5945' then '7976'
when value_coded='5949' then '2641'
when value_coded='5960' then '2653'
when value_coded='5964' then '8166'
when value_coded='5980' then '943'
when value_coded='6001' then '919'
when value_coded='6007' then '2631'
when value_coded='6020' then '2683'
when value_coded='6024' then '7735'
when value_coded='6029' then '1012'
when value_coded='6033' then '1050'
when value_coded='6142' then '8247'
when value_coded='6143' then '8020'
when value_coded='6158' then '1916'
when value_coded='620' then '905'
when value_coded='6226' then '3052'
when value_coded='6228' then '2060'
when value_coded='6229' then '2061'
when value_coded='6230' then '2062'
when value_coded='6245' then '7928'
when value_coded='6248' then '2364'
when value_coded='6257' then '2331'
when value_coded='6276' then '7934'
when value_coded='63' then '5756'
when value_coded='6304' then '7927'
when value_coded='6305' then '97'
when value_coded='645' then '3033'
when value_coded='653' then '8137'
when value_coded='654' then '8135'
when value_coded='655' then '3305'
when value_coded='664' then '8340'
when value_coded='666' then '1223'
when value_coded='689' then '2305'
when value_coded='697' then '2306'
when value_coded='702' then '8055'
when value_coded='728' then '1322'
when value_coded='729' then '1209'
when value_coded='732' then '8390'
when value_coded='733' then '1511'
when value_coded='735' then '1529'
when value_coded='735' then '8391'
when value_coded='740' then '365'
when value_coded='745' then '8407'
when value_coded='747' then '1588'
when value_coded='751' then '1632'
when value_coded='753' then '1575'
when value_coded='754' then '1526'
when value_coded='755' then '8414'
when value_coded='756' then '1670'
when value_coded='763' then '1655'
when value_coded='765' then '1667'
when value_coded='766' then '1674'
when value_coded='767' then '1100'
when value_coded='77' then '467'
when value_coded='779' then '1547'
when value_coded='786' then '1534'
when value_coded='790' then '8147'
when value_coded='798' then '1682'
when value_coded='80' then '1073'
when value_coded='81' then '1973'
when value_coded='814' then '985'
when value_coded='826' then '7734'
when value_coded='832' then '1008'
when value_coded='834' then '7967'
when value_coded='836' then '7718'
when value_coded='838' then '6555'
when value_coded='848' then '8134'
when value_coded='851' then '1213'
when value_coded='855' then '3238'
when value_coded='856' then '8142'
when value_coded='857' then '8165'
when value_coded='859' then '2645'
when value_coded='868' then '1151'
when value_coded='868' then '884'
when value_coded='871' then '2642'
when value_coded='877' then '1081'
when value_coded='879' then '6530'
when value_coded='88' then '1525'
when value_coded='880' then '834'
when value_coded='881' then '6974'
when value_coded='884' then '2560'
when value_coded='89' then '370'
when value_coded='892' then '5752'
when value_coded='896' then '507'
when value_coded='899' then '2'
when value_coded='901' then '7007'
when value_coded='905' then '1948'
when value_coded='907' then '1629'
when value_coded='912' then '1609'
when value_coded='913' then '1551'
when value_coded='914' then '1552'
when value_coded='915' then '1698'
when value_coded='922' then '1561'
when value_coded='923' then '1678'
when value_coded='926' then '1618'
when value_coded='93' then '1563'
when value_coded='937' then '5777'
when value_coded='941' then '1509'
when value_coded='944' then '1523'
when value_coded='95' then '1579'
when value_coded='955' then '8118'
when value_coded='955' then '8417'
when value_coded='959' then '1577'
when value_coded='960' then '1557'
when value_coded='963' then '1543'
when value_coded='967' then '910'
when value_coded='970' then '8317'
when value_coded='971' then '8316'
when value_coded='98' then '1550'
when value_coded='99' then '1593'
when value_coded='991' then '428'
when value_coded='996' then '890'
else value_coded
end as value_coded
, value_coded_name_id
, value_drug
, value_datetime
, value_numeric
, value_modifier
, value_text
, comments
, '4' as creator
, date_created
, voided
, case 
when voided_by is not null then '4' end as voided_by
, date_voided
, void_reason
, value_complex
, uuid
, previous_version
, form_namespace_and_path
FROM obs where concept_id in ('1441','1442','1611','1271','1255','856','5497'
,'21','654','653','887','1982','6332','6122','6128','6121','6126','6127','5965','1113','6120','5356')
or obs_id in (select obs_group_id from obs where obs_group_id is not null)
order by person_id asc</sql>
    <limit>0</limit>
    <lookup />
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>352</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>get new encounter id</name>
    <type>DBLookup</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>poc</connection>
    <cache>N</cache>
    <cache_load_all>N</cache_load_all>
    <cache_size>0</cache_size>
    <lookup>
      <schema />
      <table>encounter_temp</table>
      <orderby />
      <fail_on_multiple>N</fail_on_multiple>
      <eat_row_on_failure>N</eat_row_on_failure>
      <key>
        <name>encounter_id</name>
        <field>encounter_id</field>
        <condition>=</condition>
        <name2 />
      </key>
      <key>
        <name>person_id_1</name>
        <field>patient_id</field>
        <condition>=</condition>
        <name2 />
      </key>
      <value>
        <name>new_encounter_id</name>
        <rename>new_encounter_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>encounter_id</name>
        <rename>encounter_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>encounter_type</name>
        <rename>encounter_type</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>patient_id</name>
        <rename>patient_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>location_id</name>
        <rename>location_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>form_id</name>
        <rename>form_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>encounter_datetime</name>
        <rename>encounter_datetime</rename>
        <default />
        <type>Timestamp</type>
      </value>
      <value>
        <name>creator</name>
        <rename>creator</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>date_created</name>
        <rename>date_created</rename>
        <default />
        <type>Timestamp</type>
      </value>
      <value>
        <name>voided</name>
        <rename>voided</rename>
        <default />
        <type>Boolean</type>
      </value>
      <value>
        <name>voided_by</name>
        <rename>voided_by</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>date_voided</name>
        <rename>date_voided</rename>
        <default />
        <type>Timestamp</type>
      </value>
      <value>
        <name>void_reason</name>
        <rename>void_reason</rename>
        <default />
        <type>String</type>
      </value>
      <value>
        <name>changed_by</name>
        <rename>changed_by</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>date_changed</name>
        <rename>date_changed</rename>
        <default />
        <type>Timestamp</type>
      </value>
      <value>
        <name>visit_id</name>
        <rename>visit_id</rename>
        <default />
        <type>Integer</type>
      </value>
      <value>
        <name>uuid</name>
        <rename>uuid</rename>
        <default />
        <type>String</type>
      </value>
    </lookup>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>800</xloc>
      <yloc>432</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>new_patient_id</name>
    <type>TableInput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>poc</connection>
    <sql>SELECT
  person_attribute_id
, person_id
, value
, person_attribute_type_id
, creator
, date_created
, changed_by
, date_changed
, voided
, voided_by
, date_voided
, void_reason
, uuid
FROM person_attribute WHERE person_attribute_type_id = '64'
order by person_id asc
</sql>
    <limit>0</limit>
    <lookup />
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>512</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>poc_obs</name>
    <type>TableOutput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>poc</connection>
    <schema />
    <table>obs</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field />
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field />
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field />
    <fields>
      <field>
        <column_name>person_id</column_name>
        <stream_name>person_id_1</stream_name>
      </field>
      <field>
        <column_name>concept_id</column_name>
        <stream_name>concept_id</stream_name>
      </field>
      <field>
        <column_name>encounter_id</column_name>
        <stream_name>new_encounter_id</stream_name>
      </field>
      <field>
        <column_name>order_id</column_name>
        <stream_name>order_id</stream_name>
      </field>
      <field>
        <column_name>obs_datetime</column_name>
        <stream_name>obs_datetime</stream_name>
      </field>
      <field>
        <column_name>location_id</column_name>
        <stream_name>location_id</stream_name>
      </field>
      <field>
        <column_name>obs_group_id</column_name>
        <stream_name>obs_group_id</stream_name>
      </field>
      <field>
        <column_name>accession_number</column_name>
        <stream_name>accession_number</stream_name>
      </field>
      <field>
        <column_name>value_group_id</column_name>
        <stream_name>value_group_id</stream_name>
      </field>
      <field>
        <column_name>value_coded</column_name>
        <stream_name>value_coded</stream_name>
      </field>
      <field>
        <column_name>value_coded_name_id</column_name>
        <stream_name>value_coded_name_id</stream_name>
      </field>
      <field>
        <column_name>value_drug</column_name>
        <stream_name>value_drug</stream_name>
      </field>
      <field>
        <column_name>value_datetime</column_name>
        <stream_name>value_datetime</stream_name>
      </field>
      <field>
        <column_name>value_numeric</column_name>
        <stream_name>value_numeric</stream_name>
      </field>
      <field>
        <column_name>value_modifier</column_name>
        <stream_name>value_modifier</stream_name>
      </field>
      <field>
        <column_name>value_text</column_name>
        <stream_name>value_text</stream_name>
      </field>
      <field>
        <column_name>comments</column_name>
        <stream_name>comments</stream_name>
      </field>
      <field>
        <column_name>creator</column_name>
        <stream_name>creator</stream_name>
      </field>
      <field>
        <column_name>date_created</column_name>
        <stream_name>date_created</stream_name>
      </field>
      <field>
        <column_name>voided</column_name>
        <stream_name>voided</stream_name>
      </field>
      <field>
        <column_name>voided_by</column_name>
        <stream_name>voided_by</stream_name>
      </field>
      <field>
        <column_name>date_voided</column_name>
        <stream_name>date_voided</stream_name>
      </field>
      <field>
        <column_name>void_reason</column_name>
        <stream_name>void_reason</stream_name>
      </field>
      <field>
        <column_name>value_complex</column_name>
        <stream_name>value_complex</stream_name>
      </field>
      <field>
        <column_name>uuid</column_name>
        <stream_name>uuid</stream_name>
      </field>
      <field>
        <column_name>previous_version</column_name>
        <stream_name>previous_version</stream_name>
      </field>
    </fields>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>create temp</name>
    <type>ExecSQL</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>poc</connection>
    <execute_each_row>N</execute_each_row>
    <single_statement>Y</single_statement>
    <replace_variables>N</replace_variables>
    <quoteString>N</quoteString>
    <sql>CREATE TABLE obs_temp (
`new_obs_id` int(11) ,
`new_obs_group_id` int(11) DEFAULT NULL,
  `obs_id` int(11) NOT NULL AUTO_INCREMENT,
  `person_id` int(11) NOT NULL,
  `concept_id` int(11) NOT NULL DEFAULT '0',
  `encounter_id` int(11) DEFAULT NULL,
  `order_id` int(11) DEFAULT NULL,
  `obs_datetime` datetime NOT NULL,
  `location_id` int(11) DEFAULT NULL,
  `obs_group_id` int(11) DEFAULT NULL,
  `accession_number` varchar(255) DEFAULT NULL,
  `value_group_id` int(11) DEFAULT NULL,
  `value_coded` int(11) DEFAULT NULL,
  `value_coded_name_id` int(11) DEFAULT NULL,
  `value_drug` int(11) DEFAULT NULL,
  `value_datetime` datetime DEFAULT NULL,
  `value_numeric` double DEFAULT NULL,
  `value_modifier` varchar(2) DEFAULT NULL,
  `value_text` text,
  `value_complex` varchar(1000) DEFAULT NULL,
  `comments` varchar(255) DEFAULT NULL,
  `creator` int(11) NOT NULL DEFAULT '0',
  `date_created` datetime NOT NULL,
  `voided` tinyint(1) NOT NULL DEFAULT '0',
  `voided_by` int(11) DEFAULT NULL,
  `date_voided` datetime DEFAULT NULL,
  `void_reason` varchar(255) DEFAULT NULL,
  `uuid` char(38) NOT NULL,
  `previous_version` int(11) DEFAULT NULL,
  `form_namespace_and_path` varchar(255) DEFAULT NULL,
  `status` varchar(16) NOT NULL DEFAULT 'FINAL',
  `interpretation` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`obs_id`));</sql>
    <set_params>N</set_params>
    <insert_field />
    <update_field />
    <delete_field />
    <read_field />
    <arguments>
    </arguments>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>256</xloc>
      <yloc>416</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>insert obs into temp</name>
    <type>TableOutput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>poc</connection>
    <schema />
    <table>obs_temp</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>N</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field />
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field />
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field />
    <fields>
      <field>
        <column_name>person_id</column_name>
        <stream_name>person_id_1</stream_name>
      </field>
      <field>
        <column_name>concept_id</column_name>
        <stream_name>concept_id</stream_name>
      </field>
      <field>
        <column_name>encounter_id</column_name>
        <stream_name>new_encounter_id</stream_name>
      </field>
      <field>
        <column_name>order_id</column_name>
        <stream_name>order_id</stream_name>
      </field>
      <field>
        <column_name>obs_datetime</column_name>
        <stream_name>obs_datetime</stream_name>
      </field>
      <field>
        <column_name>location_id</column_name>
        <stream_name>location_id</stream_name>
      </field>
      <field>
        <column_name>obs_group_id</column_name>
        <stream_name>obs_group_id</stream_name>
      </field>
      <field>
        <column_name>accession_number</column_name>
        <stream_name>accession_number</stream_name>
      </field>
      <field>
        <column_name>value_group_id</column_name>
        <stream_name>value_group_id</stream_name>
      </field>
      <field>
        <column_name>value_coded</column_name>
        <stream_name>value_coded</stream_name>
      </field>
      <field>
        <column_name>value_coded_name_id</column_name>
        <stream_name>value_coded_name_id</stream_name>
      </field>
      <field>
        <column_name>value_drug</column_name>
        <stream_name>value_drug</stream_name>
      </field>
      <field>
        <column_name>value_datetime</column_name>
        <stream_name>value_datetime</stream_name>
      </field>
      <field>
        <column_name>value_numeric</column_name>
        <stream_name>value_numeric</stream_name>
      </field>
      <field>
        <column_name>value_modifier</column_name>
        <stream_name>value_modifier</stream_name>
      </field>
      <field>
        <column_name>value_text</column_name>
        <stream_name>value_text</stream_name>
      </field>
      <field>
        <column_name>comments</column_name>
        <stream_name>comments</stream_name>
      </field>
      <field>
        <column_name>creator</column_name>
        <stream_name>creator</stream_name>
      </field>
      <field>
        <column_name>date_created</column_name>
        <stream_name>date_created</stream_name>
      </field>
      <field>
        <column_name>voided</column_name>
        <stream_name>voided</stream_name>
      </field>
      <field>
        <column_name>voided_by</column_name>
        <stream_name>voided_by</stream_name>
      </field>
      <field>
        <column_name>date_voided</column_name>
        <stream_name>date_voided</stream_name>
      </field>
      <field>
        <column_name>void_reason</column_name>
        <stream_name>void_reason</stream_name>
      </field>
      <field>
        <column_name>value_complex</column_name>
        <stream_name>value_complex</stream_name>
      </field>
      <field>
        <column_name>uuid</column_name>
        <stream_name>uuid</stream_name>
      </field>
      <field>
        <column_name>previous_version</column_name>
        <stream_name>previous_version</stream_name>
      </field>
      <field>
        <column_name>obs_id</column_name>
        <stream_name>obs_id</stream_name>
      </field>
    </fields>
    <attributes />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1024</xloc>
      <yloc>208</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
  <attributes />
</transformation>
